(this["webpackJsonpaktiv-web"]=this["webpackJsonpaktiv-web"]||[]).push([[40],{680:function(e,t,a){"use strict";a.r(t);var s=a(163),n=a(37),i=a(159),o=a(160),r=a(63),c=a(162),l=a(161),h=a(1),d=a(627),j=a(628),u=a(634),p=(a(633),a(8)),b=function(e){switch(e){case"Aktif":return"info";case"Non Aktif":default:return"secondary"}},m=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).getPuskesmasList=function(){fetch("https://api.aktiv.co.id/api/aktivengine/v1/puskesmas/list",{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem("token"))})}).then((function(e){return e.json()})).then((function(t){var a=t.data.items.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{key:e.id,label:e.puskesmas})}));e.setState({listPuskesmas:a})})).catch((function(e){alert(e)}))},e.getUsersData=function(){fetch("https://auth.aktiv.co.id/api/auth/v1/user/list",{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem("token"))})}).then((function(e){return e.json()})).then((function(t){var a;a=t.data.items.filter((function(e){return"volunteer"!=e.role&&"admin"!=e.role&&"patient"!=e.role})).map((function(e){return Object(n.a)(Object(n.a)({},e),{},{name:e.profile.first_name?e.profile.first_name:""})})),console.log(a),e.setState({usersData:a,totalPage:t.data.total_page})})).catch((function(e){alert(e)}))},e.handleRolesChange=function(t){var a=t.target.id;e.setState(Object(s.a)({},a,t.target.value))},e.handleInputChange=function(t){var a=t.target.id;e.setState(Object(s.a)({},a,t.target.value))},e.addUserData=function(){var t={username:e.state.username,password:e.state.password,role:e.state.roles,email:e.state.email,first_name:e.state.first_name,puskesmasID:e.state.puskesmasID,birth_date:"".concat(e.state.birth_date," 00:00:00"),noHp:e.state.noHp,alamatDom:e.state.alamatDom,profesi:e.state.profesi,institusi:e.state.institusi,gender:e.state.gender,volunteerLink:e.state.volunteerLink,org_token:"uWOZxPN6io8G4uoK6ZFsPzfJoOlgLpmI"};console.log(t),fetch("https://auth.aktiv.co.id/api/auth/v1/user/add",{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json",Authorization:localStorage.getItem("token")})}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("status")&&("OK"===t.status?(u.b.success("Tambah Berhasil",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.toggleModal(),e.getUsersData()):u.b.error("Tambah Gagal: "+t.statusmsg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}))})).catch((function(e){return console.error(e)}))},e.pageChange=function(t){e.setState({page:t}),e.getUsersData()},e.toggleModal=function(t){e.setModal(!e.state.modal)},e.state={usersData:[],listPuskesmas:[],totalPage:1,usersDetail:null,page:1,editId:0,editActive:0},e.handleInputChange=e.handleInputChange.bind(Object(r.a)(e)),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getUsersData(),this.getPuskesmasList()}},{key:"setModal",value:function(e){this.setState({modal:e})}},{key:"deleteUser",value:function(e){var t=this;if(window.confirm("Apakah anda yakin ingin menghapus data ini?")){var a={id:e.id};fetch("https://auth.aktiv.co.id/api/auth/v1/user/delete",{method:"DELETE",body:JSON.stringify(a),headers:new Headers({"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem("token"))})}).then((function(e){return e.json()})).then((function(e){console.log("====== Delete User Response ======="),console.log(e),e.hasOwnProperty("status")&&("OK"===e.status?(u.b.success("Delete Berhasil",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),t.getUsersData()):u.b.error("Delete Gagal "+e.statusmsg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}))})).catch((function(e){alert(e)}))}}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(d.R,{children:[Object(p.jsxs)(d.k,{xl:12,children:[Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"d-flex flex-row-reverse",children:Object(p.jsx)(d.e,{className:"btn-facebook btn-brand mb-4 mr-2",onClick:function(){e.toggleModal()},children:Object(p.jsx)("span",{children:"Tambah User"})})})}),Object(p.jsx)(d.f,{children:Object(p.jsx)(d.g,{children:Object(p.jsx)(d.n,{items:this.state.usersData,fields:[{key:"name",label:"Nama",_classes:"font-weight-bold"},"username","role",{key:"action",sorter:!1}],hover:!0,sorter:!0,striped:!0,tableFilter:!0,itemsPerPage:50,scopedSlots:{status:function(e){return Object(p.jsx)("td",{children:Object(p.jsx)(d.a,{color:b(e.status),children:e.status})})},action:function(t,a){return Object(p.jsxs)("td",{className:"py-2",children:["Non Aktif"===t.status&&Object(p.jsxs)(d.e,{"data-toggle":"tooltip","data-placement":"top",title:"Izinkan",className:"mr-1",color:"info",shape:"rounded",size:"sm",onClick:function(){e.activateUser(t)},children:[Object(p.jsx)(j.a,{name:"cil-check"})," Aktivasi"]}),Object(p.jsx)(d.e,{"data-toggle":"tooltip","data-placement":"top",title:"Hapus Data",color:"danger",shape:"rounded",size:"sm",onClick:function(){e.deleteUser(t)},children:Object(p.jsx)(j.a,{name:"cil-trash"})})]})}}})})})]}),Object(p.jsxs)(d.L,{show:this.state.modal,onClose:this.toggleModal,children:[Object(p.jsx)(d.O,{closeButton:!0,children:"Edit Data"}),Object(p.jsx)(d.M,{children:Object(p.jsxs)(d.l,{children:[Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"my-1",children:Object(p.jsxs)(d.v,{children:[Object(p.jsx)(d.I,{htmlFor:"username",children:"Username"}),Object(p.jsx)(d.A,{id:"username",type:"text",placeholder:"Masukkan Username",onChange:this.handleInputChange})]})})}),Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"my-1",children:Object(p.jsxs)(d.v,{children:[Object(p.jsx)(d.I,{htmlFor:"email",children:"Email"}),Object(p.jsx)(d.A,{type:"email",id:"email",placeholder:"Masukkan Email",onChange:this.handleInputChange})]})})}),Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"my-1",children:Object(p.jsxs)(d.v,{children:[Object(p.jsx)(d.I,{htmlFor:"password",children:"Password"}),Object(p.jsx)("input",{type:"text",autoComplete:"username",style:{display:"none"}}),Object(p.jsx)("input",{type:"password",style:{display:"none"}}),Object(p.jsx)(d.A,{type:"password",id:"password",placeholder:"Masukkan password",onChange:this.handleInputChange})]})})}),Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"my-1",children:Object(p.jsxs)(d.v,{children:[Object(p.jsx)(d.I,{htmlFor:"first_name",children:"Nama"}),Object(p.jsx)(d.A,{type:"text",id:"first_name",placeholder:"Masukkan Nama",onChange:this.handleInputChange})]})})}),Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"my-1",children:Object(p.jsxs)(d.v,{children:[Object(p.jsx)(d.I,{htmlFor:"birth_date",children:"Tanggal Lahir"}),Object(p.jsx)(d.A,{type:"date",id:"birth_date",placeholder:"Masukkan Tanggal Lahir",onChange:this.handleInputChange})]})})}),Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"my-1",children:Object(p.jsxs)(d.v,{children:[Object(p.jsx)(d.I,{htmlFor:"noHp",children:"No Hp"}),Object(p.jsx)(d.A,{type:"text",id:"noHp",placeholder:"Masukkan No Hp",onChange:this.handleInputChange})]})})}),Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"my-1",children:Object(p.jsxs)(d.v,{children:[Object(p.jsx)(d.I,{htmlFor:"alamatDom",children:"Alamat Domisili"}),Object(p.jsx)(d.A,{type:"text",id:"alamatDom",placeholder:"Masukkan Alamat Domisili",onChange:this.handleInputChange})]})})}),Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"my-1",children:Object(p.jsxs)(d.v,{children:[Object(p.jsx)(d.I,{htmlFor:"profesi",children:"Profesi"}),Object(p.jsx)(d.A,{type:"text",id:"profesi",placeholder:"Masukkan Profesi",onChange:this.handleInputChange})]})})}),Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"my-1",children:Object(p.jsxs)(d.v,{children:[Object(p.jsx)(d.I,{htmlFor:"institusi",children:"Institusi"}),Object(p.jsx)(d.A,{type:"text",id:"institusi",placeholder:"Masukkan Institusi",onChange:this.handleInputChange})]})})}),Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"my-1",children:Object(p.jsxs)(d.v,{children:[Object(p.jsx)(d.I,{htmlFor:"gender",children:"Jenis Kelamin"}),Object(p.jsxs)(d.S,{id:"gender",onChange:this.handleInputChange,value:this.state.gender,children:[Object(p.jsx)("option",{value:"",children:"-- Pilih Jenis Kelamin --"},""),Object(p.jsx)("option",{value:"L",children:"Laki-Laki"},"L"),Object(p.jsx)("option",{value:"P",children:"Perempuan"},"P")]})]})})}),Object(p.jsx)(d.R,{children:Object(p.jsx)(d.k,{className:"my-1",children:Object(p.jsxs)(d.v,{children:[Object(p.jsx)(d.I,{htmlFor:"gender",children:"Role"}),Object(p.jsxs)(d.S,{id:"roles",value:this.state.roles,onChange:this.handleRolesChange.bind(this),children:[Object(p.jsx)("option",{value:"",children:"-- Pilih Role --"},""),Object(p.jsx)("option",{value:"operator",children:"Admin"},"operator"),Object(p.jsx)("option",{value:"dinkes",children:"Dinas Kesehatan"},"dinkes")]})]})})})]})}),Object(p.jsxs)(d.N,{children:[Object(p.jsx)(d.e,{color:"secondary",onClick:this.toggleModal,children:"Cancel"}),Object(p.jsx)(d.e,{color:"primary",onClick:this.addUserData,children:"Simpan"})]})]}),Object(p.jsx)(u.a,{position:"top-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}}]),a}(h.Component);t.default=m}}]);
//# sourceMappingURL=40.c2872d71.chunk.js.map