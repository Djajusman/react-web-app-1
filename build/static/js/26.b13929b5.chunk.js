(this["webpackJsonpaktiv-web"]=this["webpackJsonpaktiv-web"]||[]).push([[26],{692:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return O}));var o=a(163),n=a(159),r=a(160),s=a(162),i=a(161),c=a(1),l=a(659),d=a(662),h=a(755),g=(a(756),a(627)),u=a(634),p=(a(633),a(758)),b=a(757),j=a(8),v={border:"1px solid black",height:"100%",color:"black",padding:20},m={border:"1px solid black",color:"black",padding:20,height:"100%"},O=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState({editorState:t})},e.onEditorStateChange=function(t){e.setState({editorState:t}),console.log(t)},e.handleInputChange=function(t){var a=t.target.id;e.setState(Object(o.a)({},a,t.target.value))},e.handleStatusChange=function(t){var a=t.target.id;e.setState(Object(o.a)({},a,"true"==t.target.value))},e.getArticleDetail=function(){fetch("https://api.aktiv.co.id/api/aktivengine/v1/article/get?id=".concat(e.props.match.params.id),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:localStorage.getItem("token")})}).then((function(e){return e.json()})).then((function(t){console.log(t);var a=e.state.editorState;e.onChange(d.EditorState.push(a,Object(p.a)(t.data.content)));var o=0,n=0;console.log("subcategory"),console.log(t.data.subCategory),e.setState({title:t.data.title,articleImage:t.data.image,enableVideo:""!=t.data.video,video:t.data.video,subCategory:t.data.subCategory.map((function(e){return{id:++o,name:e}})),selectedValue:t.data.subCategory.map((function(e){return{id:++n,name:e}}))})})).catch((function(e){return console.log(e)}))},e.updateArticle=function(){var t=Object(d.convertToRaw)(e.state.editorState.getCurrentContent()),a="";t.blocks.forEach((function(e){a+="".concat(e.text," ")}));var o={id:e.props.match.params.id,title:e.state.title,header:"".concat(a.substring(0,200),"....."),content:Object(p.b)(e.state.editorState.getCurrentContent()),subCategory:e.state.subCategory.map((function(e){return e.name})),image:e.state.articleImage,video:e.state.video};console.log(o),fetch("https://api.aktiv.co.id/api/aktivengine/v1/article/update",{method:"PUT",body:JSON.stringify(o),headers:new Headers({"Content-Type":"application/json",Authorization:localStorage.getItem("token")})}).then((function(e){return e.json()})).then((function(t){console.log(t),"OK"==t.status?(u.b.success("Update Artikel Berhasil",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.props.history.goBack()):u.b.error("Update Artikel Gagal "+t.statusmsg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){u.b.error("Tambah Artikel Gagal: "+e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),alert(e)}))},e.addArticle=function(){var t=Object(d.convertToRaw)(e.state.editorState.getCurrentContent()),a="";t.blocks.forEach((function(e){a+="".concat(e.text," ")}));var o={title:e.state.title,header:"".concat(a.substring(0,200),"....."),content:Object(p.b)(e.state.editorState.getCurrentContent()),subCategory:e.state.subCategory.map((function(e){return e.name})),image:e.state.articleImage,video:e.state.video};console.log(o),fetch("https://api.aktiv.co.id/api/aktivengine/v1/article/add",{method:"POST",body:JSON.stringify(o),headers:new Headers({"Content-Type":"application/json",Authorization:localStorage.getItem("token")})}).then((function(e){return e.json()})).then((function(t){console.log(t),"OK"==t.status?(u.b.success("Tambah Artikel Berhasil",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.props.history.goBack()):u.b.error("Tambah Artikel Gagal "+t.statusmsg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){u.b.error("Tambah Artikel Gagal: "+e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),alert(e)}))},e.getCategoryList=function(){fetch("https://api.aktiv.co.id/api/aktivengine/v1/article/category/list",{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:localStorage.getItem("token")})}).then((function(e){return e.json()})).then((function(t){var a=[];t.data.items.forEach((function(e){e.subCategory.forEach((function(t){a.push({name:t,id:e.id})}))})),e.setState({getCategoryList:a})})).catch((function(e){return console.log(e)}))},e.onSelect=function(t,a){e.setState({subCategory:t})},e.onRemove=function(t,a){e.setState({subCategory:t})},e.state={editorState:d.EditorState.createEmpty(),getCategoryList:[],subCategory:[],enableVideo:!1,articleImage:"",category:"",header:"",title:"",video:""},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.getCategoryList(),""!=this.props.match.params.id&&this.getArticleDetail()}},{key:"convertToBase64",value:function(e){var t=this,a=new FileReader;a.onload=function(e){t.setState({articleImage:e.target.result})},a.readAsDataURL(e)}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsxs)(g.f,{children:[Object(j.jsx)(g.R,{children:Object(j.jsx)(g.k,{children:Object(j.jsx)(g.f,{children:Object(j.jsxs)(g.g,{children:[Object(j.jsxs)(g.v,{children:[Object(j.jsx)(g.I,{htmlFor:"company",children:"Judul"}),Object(j.jsx)(g.A,{id:"title",placeholder:"",value:this.state.title,onChange:this.handleInputChange.bind(this)})]}),Object(j.jsxs)(g.v,{children:[Object(j.jsx)(g.I,{children:"Kategori"}),Object(j.jsx)(b.Multiselect,{options:this.state.getCategoryList,selectedValues:this.state.selectedValue,onSelect:this.onSelect,onRemove:this.onRemove,displayValue:"name"})]}),Object(j.jsxs)(g.v,{children:[Object(j.jsx)(g.I,{htmlFor:"textEditor",children:"Text Editor"}),Object(j.jsx)("div",{style:v,children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col",children:Object(j.jsx)(h.Editor,{editorState:this.state.editorState,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:this.onEditorStateChange})})})})})]}),Object(j.jsxs)(g.v,{children:[Object(j.jsx)(g.k,{children:Object(j.jsx)(g.I,{htmlFor:"header",children:"Header"})}),Object(j.jsx)(g.k,{children:Object(j.jsx)(g.R,{children:Object(j.jsx)(g.k,{className:"my-1",children:Object(j.jsxs)(g.v,{variant:"checkbox",className:"checkbox mb-3",children:[Object(j.jsx)(g.B,{id:"enableVideo",name:"enableVideo",checked:this.state.enableVideo,value:!this.state.enableVideo,onChange:this.handleStatusChange.bind(this)}),Object(j.jsx)(g.I,{variant:"checkbox",className:"form-check-label",htmlFor:"enableVideo",children:"Video"})]})})})}),this.state.enableVideo&&Object(j.jsx)(g.k,{sm:6,className:"mb-4",children:Object(j.jsx)(g.A,{placeholder:"Masukkan URL / Link Video Anda Disini",type:"text",id:"video",value:this.state.video,onChange:this.handleInputChange.bind(this)})}),Object(j.jsx)(g.R,{children:Object(j.jsxs)(g.k,{children:[""==this.state.articleImage&&Object(j.jsx)("div",{style:m,children:Object(j.jsxs)(l.FileDrop,{onFrameDragEnter:function(e){return console.log("onFrameDragEnter",e)},onFrameDragLeave:function(e){return console.log("onFrameDragLeave",e)},onFrameDrop:function(e){return console.log("onFrameDrop",e)},onDragOver:function(e){return console.log("onDragOver",e)},onDragLeave:function(e){return console.log("onDragLeave",e)},onDrop:function(t,a){console.log("onDrop!",t,a);var o=t[0];o.size<=5e5?e.convertToBase64(o):u.b.error("Ukuran File Maks 500 Kb!!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},onChange:this.handleInputChange.bind(this),children:[Object(j.jsx)(g.z,{src:"logo/image.svg"}),"Upload image: png, jpg max 500 Kb"]})}),""!=this.state.articleImage&&Object(j.jsx)("div",{style:m,children:Object(j.jsx)(l.FileDrop,{onDrop:function(t,a){console.log("onDrop!",t,a);var o=t[0];o.size<=5e5?e.convertToBase64(o):u.b.error("Ukuran File Maks 500 Kb!!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},onChange:this.handleInputChange.bind(this),children:Object(j.jsx)(g.z,{width:"50%",src:this.state.articleImage})})})]})})]})]})})})}),Object(j.jsx)(g.R,{children:Object(j.jsx)(g.k,{className:"d-flex flex-row-reverse",children:Object(j.jsx)(g.e,{className:"btn-facebook btn-brand mr-3 mb-3",onClick:function(){""==e.state.articleImage||""==e.state.title?u.b.error("Harap isi semua data!!!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):(console.log(e.props.match.params.id),""==e.props.match.params.id||void 0==e.props.match.params.id?e.addArticle():e.updateArticle())},children:Object(j.jsx)("span",{children:"Tayang"})})})})]}),Object(j.jsx)(u.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}}]),a}(c.Component)}}]);
//# sourceMappingURL=26.b13929b5.chunk.js.map