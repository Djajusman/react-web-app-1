{"version":3,"sources":["views/puskesmas/puskesmas.js"],"names":["getBadge","status","puskesmasFields","label","key","_style","width","Puskesmas","deletePuskesmas","id","window","confirm","body","fetch","method","JSON","stringify","headers","Headers","Authorization","localStorage","getItem","then","response","json","data","hasOwnProperty","toast","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","puskesmaslist","error","statusmsg","catch","console","downloadExcel","responseType","log","link","document","createElement","download","href","fileUrl","appendChild","click","removeChild","alert","page","res","setState","puskesmas","items","curr_page","total_item","state","total_page","this","className","sm","style","backgroundColor","onClick","name","to","fields","itemsPerPage","tableFilter","sorter","pagination","scopedSlots","item","color","action","index","size","props","history","push","newestOnTop","rtl","pauseOnFocusLoss","Component"],"mappings":"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","file":"static/js/37.50fefa9e.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n  CBadge,\r\n  CCard,\r\n  CCardBody,\r\n  CRow,\r\n  CCol,\r\n  CButton,\r\n  CDataTable,\r\n  CFormGroup,\r\n} from '@coreui/react'\r\nimport CIcon from '@coreui/icons-react'\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst getBadge = status => {\r\n  switch (status) {\r\n    case 'Berhasil Dimonitor': return 'success'\r\n    case 'Sedang Dimonitor': return 'warning'\r\n    case 'Gagal Dimonitor': return 'danger'\r\n    default: return 'primary'\r\n  }\r\n}\r\nconst puskesmasFields = [{ label: \"Nama Puskesmas\", key: 'puskesmas' }, {key:'alamat',_style:{width:\"25%\"}}, 'noHp', 'namaPIC', 'noHpPIC',{key:'action',_style:{width:\"15%\"}}]\r\n// const puskesmasData = [\r\n//   { id: 0, name: 'Puskesmas A', alamat: '1901 Thornridge Cir. Shiloh, Hawaii 81063', telpon: '0812391839219',pic: 'Dr. Jacob Muhammad'},\r\n\r\n// ]\r\n\r\nexport default class Puskesmas extends Component {\r\n\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      puskesmas: [],\r\n\r\n      total_item: 0,\r\n      curr_page: 1,\r\n      total_page: 0,\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.puskesmaslist(1);\r\n  }\r\n  deletePuskesmas=(id)=>{\r\n    var deleted = window.confirm(\"Apakah Anda Yakin Ingin Menghapus Data Ini?\");\r\n    if(deleted){\r\n\r\n      var body ={\r\n        id:id\r\n      }\r\n      fetch(\"https://api.aktiv.co.id/api/aktivengine/v1/puskesmas/delete\", {\r\n        method: \"DELETE\",\r\n        body: JSON.stringify(body),\r\n        headers: new Headers({\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: localStorage.getItem(\"token\"),\r\n        }),\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          if (data.hasOwnProperty(\"status\")) {\r\n            if (data.status === \"OK\") {\r\n              toast.success(\"Hapus Berhasil\", {\r\n                position: \"top-right\",\r\n                autoClose: 1000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n              });\r\n              this.puskesmaslist(1);\r\n            } else {\r\n              toast.error(\"Hapus Gagal: \" + data.statusmsg, {\r\n                position: \"top-right\",\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n              });\r\n            }\r\n          }\r\n        })\r\n        .catch((error) => console.error(error));\r\n    }\r\n  }\r\n  downloadExcel = () => {\r\n    var url = `https://report.aktiv.co.id/api/report-puskesmas`;    \r\n    fetch(url, {\r\n      method: \"GET\",\r\n      headers: new Headers({\r\n        \"Content-Type\": \"application/vnd.ms-excel;charset=UTF-8\",\r\n        responseType: \"blob\",\r\n        Authorization: `${localStorage.getItem(\"token\")}`,\r\n      }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        console.log(\"====== Get Download Response =======\");\r\n        console.log(data);\r\n        var link = document.createElement(\"a\");\r\n        link.download = \"Reportnya\";\r\n        link.href = data.fileUrl;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n  puskesmaslist = (page) => {\r\n    fetch(\"https://api.aktiv.co.id/api/aktivengine/v1/puskesmas/list?page=\" + page, {\r\n      method: \"GET\",\r\n      headers: new Headers({\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: localStorage.getItem(\"token\"),\r\n      }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((res) => {\r\n        this.setState({\r\n          puskesmas: res.data.items,\r\n          curr_page: page,\r\n          total_item: res.data.total_item,\r\n        }, () =>\r\n          console.log(this.state.puskesmas)\r\n        );\r\n      })\r\n      .catch((error) => console.log(error));\r\n  }\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <CRow>\r\n          <CCol sm=\"3\">\r\n            {/* <CFormGroup>\r\n            <CLabel className=\"mt-1\" htmlFor=\"date-input\">Tanggal</CLabel>\r\n            <CInput type=\"date\" id=\"date-input\" name=\"date-input\" placeholder=\"date\" />\r\n          </CFormGroup> */}\r\n          </CCol>\r\n          <CCol className=\"d-flex flex-row-reverse\">\r\n            <CFormGroup>\r\n              <CButton className=\"btn-outline-info mt-4  mr-2\" style={{ backgroundColor: \"white\" }} onClick={()=>{\r\n                this.downloadExcel();\r\n              }}><CIcon name=\"cilDataTransferDown\" /><span className=\"mfs-2\">Unduh Excel</span></CButton>            \r\n              <Link to=\"/puskesmas/tambah_puskesmas\" className=\"btn btn-info btn-facebook btn-brand mt-4 mr-2\"><span>Tambah Puskesmas</span></Link>\r\n            </CFormGroup>\r\n          </CCol>\r\n        </CRow>\r\n        <CCard>\r\n          <CRow>\r\n            <CCol>\r\n              <CCard>\r\n                <CCardBody>\r\n                  <CDataTable\r\n                    items={this.state.puskesmas}\r\n                    fields={puskesmasFields}\r\n                    itemsPerPage={5}\r\n                    tableFilter\r\n                    sorter\r\n                    pagination\r\n                    scopedSlots={{\r\n                      'status':\r\n                        (item) => (\r\n                          <td>\r\n                            <CBadge color={getBadge(item.status)}>\r\n                              {item.status}\r\n                            </CBadge>\r\n                          </td>\r\n                        ),\r\n                        action: (item, index) => (\r\n                          <td>\r\n                           <CButton className=\"mx-1 my-1\" color=\"danger\" size=\"sm\" onClick={()=>{this.deletePuskesmas(item.id)}}><CIcon name={\"cilTrash\"}/></CButton>\r\n                           <CButton className=\"mx-1 my-1\" color=\"info\" size=\"sm\" onClick={()=>{this.props.history.push(`/puskesmas/update_puskesmas/${item.id}`)}}><CIcon name={\"cilPencil\"}/></CButton>\r\n                          </td>\r\n                        ),\r\n\r\n                    }}\r\n                  />\r\n                </CCardBody>\r\n              </CCard>\r\n            </CCol>\r\n          </CRow>\r\n        </CCard>\r\n        <ToastContainer\r\n          position=\"top-right\"\r\n          autoClose={5000}\r\n          hideProgressBar={false}\r\n          newestOnTop={false}\r\n          closeOnClick\r\n          rtl={false}\r\n          pauseOnFocusLoss\r\n          draggable\r\n          pauseOnHover\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}