(this["webpackJsonpaktiv-web"]=this["webpackJsonpaktiv-web"]||[]).push([[37],{704:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return j}));var n=s(159),a=s(160),o=s(162),i=s(161),c=s(1),r=s(62),l=s(627),u=s(628),d=s(634),p=(s(633),s(8)),h=function(e){switch(e){case"Berhasil Dimonitor":return"success";case"Sedang Dimonitor":return"warning";case"Gagal Dimonitor":return"danger";default:return"primary"}},m=[{label:"Nama Puskesmas",key:"puskesmas"},{key:"alamat",_style:{width:"25%"}},"noHp","namaPIC","noHpPIC",{key:"action",_style:{width:"15%"}}],j=function(e){Object(o.a)(s,e);var t=Object(i.a)(s);function s(){var e;return Object(n.a)(this,s),(e=t.call(this)).deletePuskesmas=function(t){if(window.confirm("Apakah Anda Yakin Ingin Menghapus Data Ini?")){var s={id:t};fetch("https://api.aktiv.co.id/api/aktivengine/v1/puskesmas/delete",{method:"DELETE",body:JSON.stringify(s),headers:new Headers({"Content-Type":"application/json",Authorization:localStorage.getItem("token")})}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("status")&&("OK"===t.status?(d.b.success("Hapus Berhasil",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.puskesmaslist(1)):d.b.error("Hapus Gagal: "+t.statusmsg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}))})).catch((function(e){return console.error(e)}))}},e.downloadExcel=function(){fetch("https://report.aktiv.co.id/api/report-puskesmas",{method:"GET",headers:new Headers({"Content-Type":"application/vnd.ms-excel;charset=UTF-8",responseType:"blob",Authorization:"".concat(localStorage.getItem("token"))})}).then((function(e){return e.json()})).then((function(e){console.log("====== Get Download Response ======="),console.log(e);var t=document.createElement("a");t.download="Reportnya",t.href=e.fileUrl,document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((function(e){alert(e)}))},e.puskesmaslist=function(t){fetch("https://api.aktiv.co.id/api/aktivengine/v1/puskesmas/list?page="+t,{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:localStorage.getItem("token")})}).then((function(e){return e.json()})).then((function(s){e.setState({puskesmas:s.data.items,curr_page:t,total_item:s.data.total_item},(function(){return console.log(e.state.puskesmas)}))})).catch((function(e){return console.log(e)}))},e.state={puskesmas:[],total_item:0,curr_page:1,total_page:0},e}return Object(a.a)(s,[{key:"componentDidMount",value:function(){this.puskesmaslist(1)}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"container-fluid",children:[Object(p.jsxs)(l.R,{children:[Object(p.jsx)(l.k,{sm:"3"}),Object(p.jsx)(l.k,{className:"d-flex flex-row-reverse",children:Object(p.jsxs)(l.v,{children:[Object(p.jsxs)(l.e,{className:"btn-outline-info mt-4  mr-2",style:{backgroundColor:"white"},onClick:function(){e.downloadExcel()},children:[Object(p.jsx)(u.a,{name:"cilDataTransferDown"}),Object(p.jsx)("span",{className:"mfs-2",children:"Unduh Excel"})]}),Object(p.jsx)(r.b,{to:"/puskesmas/tambah_puskesmas",className:"btn btn-info btn-facebook btn-brand mt-4 mr-2",children:Object(p.jsx)("span",{children:"Tambah Puskesmas"})})]})})]}),Object(p.jsx)(l.f,{children:Object(p.jsx)(l.R,{children:Object(p.jsx)(l.k,{children:Object(p.jsx)(l.f,{children:Object(p.jsx)(l.g,{children:Object(p.jsx)(l.n,{items:this.state.puskesmas,fields:m,itemsPerPage:5,tableFilter:!0,sorter:!0,pagination:!0,scopedSlots:{status:function(e){return Object(p.jsx)("td",{children:Object(p.jsx)(l.a,{color:h(e.status),children:e.status})})},action:function(t,s){return Object(p.jsxs)("td",{children:[Object(p.jsx)(l.e,{className:"mx-1 my-1",color:"danger",size:"sm",onClick:function(){e.deletePuskesmas(t.id)},children:Object(p.jsx)(u.a,{name:"cilTrash"})}),Object(p.jsx)(l.e,{className:"mx-1 my-1",color:"info",size:"sm",onClick:function(){e.props.history.push("/puskesmas/update_puskesmas/".concat(t.id))},children:Object(p.jsx)(u.a,{name:"cilPencil"})})]})}}})})})})})}),Object(p.jsx)(d.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}}]),s}(c.Component)}}]);
//# sourceMappingURL=37.50fefa9e.chunk.js.map