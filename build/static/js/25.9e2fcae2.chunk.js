(this["webpackJsonpaktiv-web"]=this["webpackJsonpaktiv-web"]||[]).push([[25],{703:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return k}));var n=a(37),s=a(163),i=a(159),o=a(160),r=a(162),c=a(161),l=a(1),h=a(627),u=a(628),d=a(62),p=a(632),m=a.n(p),j=a(634),b=(a(633),a(8)),g=function(e){switch(e){case"Berhasil Dimonitor":return"success";case"Sedang Dimonitor":return"warning";case"Gagal Dimonitor":return"danger";default:return"primary"}},f=["name","username","usia","kategori","gejala","status"],k=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target.id;e.setState(Object(s.a)({},a,t.target.value))},e.downloadExcel=function(){var t="https://report.aktiv.co.id/api/report-tenaga-kesehatan/".concat(e.props.match.params.id);fetch(t,{method:"GET",headers:new Headers({"Content-Type":"application/vnd.ms-excel;charset=UTF-8",responseType:"blob",Authorization:"".concat(localStorage.getItem("token"))})}).then((function(e){return e.json()})).then((function(e){console.log("====== Get Download Response ======="),console.log(e);var t=document.createElement("a");t.download="Reportnya",t.href=e.fileUrl,document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((function(e){alert(e)}))},e.getPuskesmasList=function(){fetch("https://api.aktiv.co.id/api/aktivengine/v1/puskesmas/list",{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem("token"))})}).then((function(e){return e.json()})).then((function(t){var a=t.data.items.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{key:e.id,label:e.puskesmas})}));e.setState({listPuskesmas:a})})).catch((function(e){alert(e)}))},e.updateDataVolunteer=function(){var t=e.state.volunteerDetail;t.profile.id=e.props.match.params.id,t.profile.first_name=e.state.first_name,t.profile.email=e.state.email,t.profile.birthDate=e.state.birthDate,t.profile.noHp=e.state.noHp,t.profile.alamatDom=e.state.alamatDom,t.profile.puskesmasID=e.state.puskesmasID;var a=t.profile;console.log("Body =>",a),fetch("https://auth.aktiv.co.id/api/auth/v1/profile/update",{method:"PUT",body:JSON.stringify(a),headers:new Headers({"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem("token"))})}).then((function(e){return e.json()})).then((function(t){console.log("Update Volunteer Response",t),t.hasOwnProperty("status")&&("OK"===t.status?(j.b.success("Update Berhasil",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.getDetailVolunteer()):j.b.error("Update Gagal "+t.statusmsg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}))})).catch((function(e){alert(e)}))},e.getDetailVolunteer=function(){fetch("https://auth.aktiv.co.id/api/auth/v1/user/get?id=".concat(e.props.match.params.id),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem("token"))})}).then((function(e){return e.json()})).then((function(t){console.log("Detail Volunteer =>",t),e.setState({volunteerDetail:t.data,first_name:t.data.profile.first_name,email:t.data.email,birthDate:t.data.profile.birthDate,noHp:t.data.profile.noHp,alamatDom:t.data.profile.alamatDom,puskesmasID:t.data.profile.puskesmasID})})).catch((function(e){alert(e)}))},e.symptomsHarian=function(e){var t=[];return void 0!==e[0]&&e[0].hasOwnProperty?(1==e[0].ageusia&&t.push("Kehilangan kemampuan indera perasa"),1==e[0].anosmia&&t.push("Kehilangan kemampuan indera penciuman"),1==e[0].batuk&&t.push("Batuk"),1==e[0].demam&&t.push("Demam".concat(void 0!=e[0].suhuDemam&&""!=e[0].suhuDemam?" ".concat(e[0].suhuDemam," C"):"")),1==e[0].demam14HariSebelumnya&&t.push("Demam 14 Hari Sebelumnya"),1==e[0].diare&&t.push("Diare"),1==e[0].kelelahan&&t.push("Kelelahan"),1==e[0].kulitKebiruan&&t.push("Wajah Membiru"),""!=e[0].lainnya&&void 0!=e[0].lainnya&&t.push(e[0].lainnya),1==e[0].nyeriDada&&t.push("Nyeri di Dada"),1==e[0].nyeriOtot&&t.push("Nyeri Otot"),1==e[0].nyeriTenggorokan&&t.push("Nyeri Tenggorokan"),1==e[0].pilek&&t.push("Pilek"),1==e[0].sakitKepala&&t.push("Sakit Kepala"),1==e[0].sesakNafas&&t.push("Sesak Nafas"),1==e[0].sulitBangun&&t.push("Sulit Bangun"),1==e[0].tidakNafsuMakan&&t.push("Tidak Nafsu Makan")):t.push("Tidak Ada Gejala"),t},e.state={listPuskesmas:[],page:1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getDetailVolunteer(),this.getPuskesmasList(),this.getDataPatients()}},{key:"getDataPatients",value:function(){var e=this;fetch("https://api.aktiv.co.id/api/aktivengine/v1/patient/list?id=".concat(this.props.match.params.id),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem("token"))})}).then((function(e){return e.json()})).then((function(t){var a=[];t.data.items.map((function(e){e.members.map((function(t){a.push(Object(n.a)(Object(n.a)({},t),{},{akunID:e.akunID,name:t.fullName?t.fullName:"",username:e.username?e.username:"",usia:t.age?t.age:0,status:t.statusMonitoring?t.statusMonitoring:"",kategori:t.diagnosa?t.diagnosa:"",diagnosa:t.diagnosa?t.diagnosa:"",gejala:t.symptomsHarian}))}))})),e.setState({patientList:a,totalPage:t.data.total_page})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h.R,{children:Object(b.jsx)(h.k,{className:"d-flex flex-row-reverse",children:Object(b.jsxs)(h.e,{className:"btn-outline-info mr-2 my-2",onClick:function(){e.downloadExcel()},children:[Object(b.jsx)(u.a,{name:"cilDataTransferDown"}),Object(b.jsx)("span",{className:"mfs-2",children:"Unduh Excel"})]})})}),Object(b.jsx)(h.R,{children:Object(b.jsx)(h.k,{children:Object(b.jsxs)(h.f,{children:[Object(b.jsxs)(h.j,{children:[Object(b.jsx)("strong",{children:"Biodata"}),Object(b.jsx)(h.e,{className:"float-right btn-facebook btn-brand",onClick:function(){e.updateDataVolunteer()},children:"Simpan"})]}),Object(b.jsx)(h.g,{children:Object(b.jsxs)(h.u,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal",children:[Object(b.jsxs)(h.v,{row:!0,children:[Object(b.jsx)(h.k,{md:"3",children:Object(b.jsx)(h.I,{children:"Nama"})}),Object(b.jsx)(h.k,{xs:"12",md:"9",children:Object(b.jsx)(h.A,{id:"first_name",type:"text",onChange:this.handleInputChange,value:this.state.first_name})})]}),Object(b.jsxs)(h.v,{row:!0,children:[Object(b.jsx)(h.k,{md:"3",children:Object(b.jsx)(h.I,{children:"Email"})}),Object(b.jsx)(h.k,{xs:"12",md:"9",children:Object(b.jsx)(h.A,{id:"email",type:"text",onChange:this.handleInputChange,value:this.state.email})})]}),Object(b.jsxs)(h.v,{row:!0,children:[Object(b.jsx)(h.k,{md:"3",children:Object(b.jsx)(h.I,{children:"Tanggal Lahir"})}),Object(b.jsx)(h.k,{xs:"12",md:"9",children:Object(b.jsx)(h.A,{id:"birthDate",type:"date",onChange:this.handleInputChange,value:m()(this.state.birthDate).format("yyyy-MM-DD")})})]}),Object(b.jsxs)(h.v,{row:!0,children:[Object(b.jsx)(h.k,{md:"3",children:Object(b.jsx)(h.I,{children:"Handphone"})}),Object(b.jsx)(h.k,{xs:"12",md:"9",children:Object(b.jsx)(h.A,{id:"noHp",type:"text",onChange:this.handleInputChange,value:this.state.noHp})})]}),Object(b.jsxs)(h.v,{row:!0,children:[Object(b.jsx)(h.k,{md:"3",children:Object(b.jsx)(h.I,{children:"Alamat Domisili"})}),Object(b.jsx)(h.k,{xs:"12",md:"9",children:Object(b.jsx)(h.A,{id:"alamatDom",type:"text",onChange:this.handleInputChange,value:this.state.alamatDom})})]}),Object(b.jsxs)(h.v,{row:!0,children:[Object(b.jsx)(h.k,{md:"3",children:Object(b.jsx)(h.I,{children:"Puskesmas"})}),Object(b.jsx)(h.k,{xs:"12",md:"9",children:Object(b.jsxs)(h.S,{id:"puskesmasID",onChange:this.handleInputChange,value:this.state.puskesmasID,children:[Object(b.jsx)("option",{value:"",children:"-- Pilih Puskesmas --"},""),this.state.listPuskesmas.map((function(e){return Object(b.jsx)("option",{value:e.key,children:e.label},e.key)}))]})})]})]})})]})})}),Object(b.jsx)(h.R,{children:Object(b.jsx)(h.k,{children:Object(b.jsxs)(h.f,{children:[Object(b.jsx)(h.j,{children:"Pasien"}),Object(b.jsx)(h.g,{children:Object(b.jsx)(h.n,{items:this.state.patientList,fields:f,itemsPerPage:50,activePage:this.state.page,tableFilter:!0,sorter:!0,pagination:!0,scopedSlots:{name:function(e){return Object(b.jsx)("td",{children:Object(b.jsx)(d.b,{to:"/medical_record/detail_pasien/".concat(e.akunID,"/").concat(e.memberID),children:e.name})})},status:function(e){return Object(b.jsx)("td",{children:Object(b.jsx)(h.a,{color:g(e.status),children:e.status})})},gejala:function(t){return Object(b.jsx)("td",{children:e.symptomsHarian(t.symptomsHarian).map((function(e){return Object(b.jsx)(h.l,{children:Object(b.jsxs)(h.R,{className:"align-items-center",children:["Tidak Ada Gejala"!=e&&Object(b.jsx)(h.z,{src:"logo/Tick_Square.svg",height:"15"}),"".concat(" ".concat(e))]})})}))})}}})})]})})}),Object(b.jsx)(j.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}}]),a}(l.Component)}}]);
//# sourceMappingURL=25.9e2fcae2.chunk.js.map